<?xml version="1.0" encoding="UTF-8"?>

<launch>
    <include file="$(find assessmentmobilerobots_2022)/launch/assessment_world_empty_personalrobot.launch"/>
    
    <!-- arguments -->
    <arg name="map_file"      default="$(find assessmentmobilerobots_2022)/map/map_2_good/map.yaml"/> 
    <arg name="initial_pose_x" default="6.0"/>
    <arg name="initial_pose_y" default="-3.0"/>
    <arg name="initial_pose_a" default="0.0"/>
 
  <!-- load the map to the map server -->
  <node pkg="map_server" name="map_server" type="map_server" args="$(arg map_file)" output="screen"/>


  <!-- initialise the probabilistic localization system AMCL -->  
  <!-- subscribe to /map, /odom, /base_link frame ids -->
  <node pkg="amcl" name="amcl" type="amcl" output="screen"> 
      <param name="min_particles"   value="50"/>
      <param name="max_particles"   value="500"/>
      <param name="global_frame_id" value="/map"/>
      <param name="base_frame_id"   value="/base_link"/>
      <param name="odom_frame_id"   value="/odom"/>
      <param name="use_map_topic"   value="true"/>
      <param name="initial_pose_x"  value="$(arg initial_pose_x)"/>
      <param name="initial_pose_y"  value="$(arg initial_pose_y)"/>
      <param name="initial_pose_a"  value="$(arg initial_pose_a)"/>
  </node>
</launch>
